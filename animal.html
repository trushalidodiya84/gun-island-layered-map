<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Gun Island â€“ Animal Migration</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
#map { height: 95vh; }
</style>
</head>

<body>

<h3>Gun Island â€“ Animal Migration Map</h3>
<div id="map"></div>

<script>

// create map
var map = L.map('map').setView([20, 40], 3);

// clean basemap
L.tileLayer(
'https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png',
{ attribution: 'Â© OpenStreetMap Â© CARTO' }
).addTo(map);

// layer for animals
var animalLayer = L.featureGroup().addTo(map);

/* ================= IRRAWADDY DOLPHIN RANGE ================= */

var dolphinRange = L.polygon([
    [22.30, 88.60],
    [22.15, 89.20],
    [21.95, 89.50],
    [21.60, 89.70],
    [21.20, 89.85],
    [20.90, 89.70],
    [21.10, 89.20],
    [21.40, 88.80],
    [21.80, 88.60],
    [22.10, 88.55]
],{
    color:"#2b8cbe",
    fillColor:"#7ec8e3",
    fillOpacity:0.35,
    weight:2
}).addTo(animalLayer);

dolphinRange.bindPopup(
"<b>Irrawaddy Dolphin Habitat Zone</b><br>" +
"Not a migration line but a living ecological range. Dolphins constantly circulate through tidal channels following fish and salinity gradients."
);

/* Feeding / activity nodes */

var feedingZones = [
 [22.05,89.10],
 [21.85,89.30],
 [21.65,89.45],
 [21.35,89.60]
];

feedingZones.forEach(function(pt){
    L.circleMarker(pt,{
        radius:4,
        color:"#08519c",
        fillColor:"#c6dbef",
        fillOpacity:1
    }).addTo(animalLayer)
    .bindPopup("Frequent dolphin activity zone");
});

/* zoom to animal data */
map.fitBounds(animalLayer.getBounds());

/* NEW REFUGE â€” deep inner river (after pollution & tide pressure) */

L.polygon([
    [22.05,89.15],
    [21.90,89.40],
    [21.70,89.55],
    [21.55,89.45],
    [21.70,89.20],
    [21.90,89.05]
],{
    color:"#08306b",
    fillColor:"#08519c",
    fillOpacity:0.55,
    weight:2
}).addTo(animalLayer)
.bindPopup(
"<b>Compressed Refuge Habitat</b><br>" +
"Due to industrial discharge and marine salinity intrusion, dolphins retreat into deeper interior channels. Habitat shrinks but density increases."
);

/* ================= RECLUSE SPIDER RANGE SHIFT (EUROPE) ================= */

// historical Mediterranean zone
var oldRange = L.polygon([
    [36.0, -5.0],  // Spain
    [37.0, 15.0],  // Sicily
    [38.0, 22.0],  // Greece
    [41.0, 18.0],  // Adriatic
    [40.0, 5.0]    // back west
],{
    color:"#8e24aa",
    fillColor:"#ce93d8",
    fillOpacity:0.35,
    weight:2
}).addTo(animalLayer);

oldRange.bindPopup(
"<b>Mediterranean Recluse â€“ Historical Habitat</b><br>" +
"Warm southern Europe where recluse spiders traditionally survived winters."
);

// expanded northern range
var newRange = L.polygon([
    [41.0, 5.0],   // Northern Italy
    [45.5, 12.5],  // Venice
    [48.0, 16.0],  // Central Europe
    [46.0, 20.0],
    [43.0, 14.0]
],{
    color:"#c62828",
    fillColor:"#ef5350",
    fillOpacity:0.35,
    weight:2
}).addTo(animalLayer);

newRange.bindPopup(
"<b>Climate-Shifted Range</b><br>" +
"Increasing European temperatures allow survival further north â€” sightings in Venice become possible."
);

// Venice sighting marker
L.circleMarker([45.44,12.33],{
    radius:7,
    color:"#000",
    fillColor:"#ffeb3b",
    fillOpacity:1
}).addTo(animalLayer)
.bindPopup(
"<b>Venice Observation (Deen)</b><br>" +
"Presence of recluse spider signals northward ecological migration caused by warming climate."
);

/* ================= MIGRATORY BIRD FLYWAY ================= */

// function to draw curved migration path
function birdRoute(coords,text){
    L.polyline(coords,{
        color:"#ff9800",
        weight:3,
        opacity:0.85,
        dashArray:"5,10"
    }).addTo(animalLayer).bindPopup(text);
}

/* Central Asian Flyway style routes */

// India â†’ Iran â†’ Turkey â†’ Europe
birdRoute(
[
    [20.0,88.0],   // Bay of Bengal wintering
    [24.0,70.0],   // Western India
    [29.0,60.0],   // Pakistan
    [33.0,52.0],   // Iran
    [39.0,35.0],   // Turkey
    [45.0,12.5]    // Europe / Venice
],
"<b>South â†’ North Seasonal Migration</b><br>Birds moving toward breeding grounds in warmer months."
);

// Arabian Sea path
birdRoute(
[
    [15.0,72.0],
    [20.0,60.0],
    [25.0,50.0],
    [32.0,40.0],
    [41.0,14.0]
],
"<b>Alternative Flyway</b><br>Parallel migration corridor across warming climates."
);

// stopover zones
var birdStops = [
 ["Wintering Grounds",[20.0,88.0]],
 ["Desert Stopover",[29.0,60.0]],
 ["Breeding Zone Europe",[45.0,12.5]]
];

birdStops.forEach(function(p){
    L.circleMarker(p[1],{
        radius:5,
        color:"#e65100",
        fillColor:"#ffcc80",
        fillOpacity:1
    }).addTo(animalLayer)
    .bindPopup("<b>"+p[0]+"</b>");
});
/* ================= SNAKE DISPLACEMENT ZONES ================= */

// Original mangrove habitat
L.polygon([
 [22.25,88.70],
 [22.10,89.20],
 [21.80,89.40],
 [21.50,89.30],
 [21.60,88.90]
],{
 color:"#006d2c",
 fillColor:"#31a354",
 fillOpacity:0.35,
 weight:2
}).addTo(animalLayer)
.bindPopup("<b>Original Snake Habitat</b><br>Mangrove burrows destroyed by salinity and flooding.");

// Pressure zone (villages)
L.polygon([
 [22.15,88.60],
 [22.00,89.30],
 [21.70,89.55],
 [21.40,89.40],
 [21.45,88.80]
],{
 color:"#bdbd00",
 fillColor:"#ffff66",
 fillOpacity:0.4,
 weight:2
}).addTo(animalLayer)
.bindPopup("<b>Ecological Pressure Zone</b><br>Snakes forced into agricultural and settlement areas.");

// Human intrusion zone (houses & boats)
L.polygon([
 [22.00,88.50],
 [21.90,89.30],
 [21.60,89.60],
 [21.30,89.45],
 [21.25,88.70]
],{
 color:"#a50f15",
 fillColor:"#fb6a4a",
 fillOpacity:0.45,
 weight:2
}).addTo(animalLayer)
.bindPopup("<b>Human Encounter Zone</b><br>Snakes enter homes and boats â€” ecological refugees.");
/* ================= USA CLIMATE EVENTS (Gun Island) ================= */

// fire icon
var fireIcon = L.divIcon({
    html: "ðŸ”¥",
    iconSize: [22,22],
    className: ""
});

// 1. Los Angeles Wildfires
L.marker([34.0522,-118.2437],{icon:fireIcon,pane:'markerPaneTop'})
.addTo(placeLayer)
.bindPopup(
"<b>California Wildfires â€“ Universal Vulnerability</b><br><br>" +
"Massive fires spread across forests and urban edges, forcing evacuation and darkening the sky.<br>" +
"The disaster mirrors the historical fire in the Gun Merchant legend, suggesting that the Anthropocene repeats earlier ecological upheavals on a planetary scale."
);

// 2. Extreme Heat Conditions
L.circleMarker([36.7783,-119.4179],{
    radius:6,
    color:"orange",
    fillOpacity:0.8
}).addTo(placeLayer)
.bindPopup(
"<b>Extreme Heat & Atmospheric Instability</b><br><br>" +
"Abnormal heat waves and dry winds create conditions for megafires.<br>" +
"Climate systems become unpredictable, showing environmental crisis is structural rather than accidental."
);

// 3. Animal Behaviour Change
L.circleMarker([37.7749,-122.4194],{
    radius:6,
    color:"green",
    fillOpacity:0.8
}).addTo(placeLayer)
.bindPopup(
"<b>Multispecies Displacement</b><br><br>" +
"Animals appear outside natural habitats, paralleling human migration across continents.<br>" +
"The novel presents ecological imbalance as a shared condition across species."
);

// 4. Psychological Impact
L.circleMarker([40.7128,-74.0060],{
    radius:6,
    color:"purple",
    fillOpacity:0.8
}).addTo(placeLayer)
.bindPopup(
"<b>Climate Anxiety & Future Insecurity</b><br><br>" +
"Urban populations experience fear and uncertainty about environmental stability.<br>" +
"The distinction between developed and developing worlds collapses â€” all become potential climate migrants."
);

</script>
</body>
</html>
